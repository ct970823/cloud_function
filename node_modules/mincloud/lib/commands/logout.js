'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.cli = cli;

var _utils = require('../utils');

function cli(engine) {
  return new Promise(function (resolve, reject) {
    var clientId = engine.config.get('client_id');
    var tokens = (0, _utils.decodeTokens)(engine.config.get('tokens'));

    if (tokens[clientId]) {
      delete tokens[clientId];
    }

    engine.config.set('tokens', (0, _utils.encodeTokens)(tokens), 'config').on('save', function () {
      console.log('注销成功');
      resolve();
    }).on('error', reject).save('config', 'ini');
  });
}